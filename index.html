<!doctype html>

<html lang="en"><head> <!-- =============================================== -->

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>kardphile</title>

<style>
  html {
    max-width: 960px;
    margin-left: auto;
    margin-right: auto;
    background-color: lightgray;
  }

  body {
    padding: 0;
    margin: 0;
  }

  #mySketch>canvas {
    border: solid 2px gray;
    background-color: #aaa;
  }
</style>

<script src="lib/p5/p5_v1.0.0.min.js" type="text/javascript"></script>
<script src="lib/fengari-web/fengari-web_v0.1.4.min.js" type="text/javascript"></script>

</head><body> <!-- ======================================================== -->

<div id="mySketch"></div>

<script type="application/lua">
  js = require "js"

  message = "Hello, world."
  js.global.message = message

  function lp(times, block)
    function inner(a, times, block)
      if a == times then
        return nil
      end
      block()
      inner(a + 1, times, block)
    end

    inner(0, times, block)
  end

  lp(10, function()
    print(message)
  end)

  -- looks like tco is a thing in fengari, excellent.
  --lp(-1, function()
  --  print("Will it ever end...?")
  --end)
</script>

</body></html> <!-- ======================================================= -->

